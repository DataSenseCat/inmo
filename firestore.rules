
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Allow public read access to collections needed for the website to display content.
    // Writes are disallowed from the client, except for leads.
    match /properties/{propertyId} {
      allow read: if true;
      allow write: if false;
    }

    match /developments/{devId} {
      allow read: if true;
      allow write: if false;
    }
    
    match /agents/{agentId} {
      allow read: if true;
      allow write: if false;
    }

    match /testimonials/{testimonialId} {
        allow read: if true;
        allow write: if false;
    }

    // The site configuration needs to be readable by everyone.
    match /siteConfig/{configId} {
      allow read: if true;
      allow write: if false;
    }

    // Public users (not signed-in) can submit the contact form, which creates a lead.
    // No one should be able to read, update, or delete leads from the client.
    match /leads/{leadId} {
      allow create: if true;
      allow read, update, delete: if false;
    }
  }
}
